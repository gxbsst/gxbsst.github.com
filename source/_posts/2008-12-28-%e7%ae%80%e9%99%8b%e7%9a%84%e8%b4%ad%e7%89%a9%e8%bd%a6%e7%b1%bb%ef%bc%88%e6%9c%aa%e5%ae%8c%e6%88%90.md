---
title: 简陋的购物车类（未完成)
author: gxbsst
layout: post
permalink: /archives/234
post_views_count:
  - 241
views:
  - 71
categories:
  - PHP
---
前几天有个朋有需要一个简单的购物车，今天帮他写了点，这个是非常不好的版本，请不要使用!!!  
发现用Rails写起来方便很多， 代码也比较少

<pre lang="php"><?php
/**
 * 简单的购物车类
 *
 * @Author Weston(weixuhong@gmail.com)
 * @version 1.0
 */

class Cart {

  public $items = array();

  public $total = "";

  function add_product($product_id){

    if(!array_key_exists($product_id, $this->items)){

      $item = array($product_id => array(“price” => 34, “quantity” => 1)) ;
      $this->items +=$item;

    }else{

      $this->items[$product_id][“quantity”]++;

    }

  }

  function remove_product ($product_id) {

    if(array_key_exists($product_id,$this->items)) {

      $this->items[$product_id]['quantity'] -= 1; 

    }else{

      trigger_error(“购物车里面没有这个产品, 请不要越权操作”); 

    }

    if( $this->items[$product_id][“quantity”] &lt;=  0 ) unset($this->items[$product_id]);

  }

  function total() {
    foreach( $this->items as $item ) {
      return $this->total += $item[“price”] * $item[“quantity”];
    }

  }

  function empty_cart(){
    unset($this->items);
  }

}


//$cart = new Cart();

//$cart->add_product(“1001”);
//$cart->add_product(“1001”);
//$cart->add_product(“1001”);
//$cart->remove_product(“1001”);
////echo $cart->total();
//$cart->empty_cart();
?>


</pre>

购物车调用: 

<pre lang="php"><?php

include "cart.php";

function find_cart() {

return isset($_SESSION['cart']) ? $_SESSION['cart'] : $_SESSION['cart'] = new Cart();

}

session_start();
$cart = find_cart();

$cart->add_product(“10001”);
$cart->add_product(“10001”);


?>

</pre>

转载请注明：[韦旭红的点点滴滴][1] &raquo; [简陋的购物车类（未完成)][2]

 [1]: http://www.weixuhong.com
 [2]: http://www.weixuhong.com/archives/234