<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title>Svn 命令 - 小红博客</title>
  <meta name="author" content="Weston Wei(韦旭红)">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://weixuhong.com/archives/66">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="小红博客" type="application/atom+xml">

  <!-- http://opengraphprotocol.org/ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://weixuhong.com/archives/66">
  <meta property="og:title" content="Svn 命令 - 小红博客">
  

  <script src="/javascripts/libs/jquery/jquery-2.0.3.min.js"></script>

<link href="/assets/bootstrap/dist/css/flat.css" rel="stylesheet" type="text/css">

<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css" media="screen" />
<script type="text/javascript" src="/fancybox/jquery.fancybox.pack.js"></script>

<script language="Javascript" type="text/javascript">
$(document).ready(
  function() {
    (function($) {
      $(".fancybox[data-content-id]").each(function() {
        this.href = $(this).data('content-id');
      });
      $(".fancybox").fancybox({
        beforeLoad: function() {
          var el, 
              id = $(this.element).data('title-id');

          if (id) {
            el = $('#' + id);

            if (el.length) {
              this.title = el.html();
            }
          }
          if ($(this).data('content')) {
            this.content = $(this).data('content');
          }
        },
        helpers: {
          title: {
            type: 'inside'
          }
        }
      });
    })(jQuery);
  }
);
</script> 

  
  
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

  

</head>

  <body   >
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">小红博客</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a rel="index" href="/">博客</a>
                </li>
                 <li >
                    <a rel="index" href="/photos">相册</a>
                </li>
                <li >
                    <a href="/blog/archives">聚合</a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="search navbar-form navbar-right" action="https://www.google.com/search" method="GET">
                    <input type="hidden" name="q" value="site:weixuhong.com">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="搜索">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" role="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9" itemscope itemtype="http://schema.org/Blog">
    <meta itemprop="name" content="小红博客" />
    <meta itemprop="description" content="这个是一个个人博客，记录生活（厨艺），技术(Javascript/AngularJs/Ruby/Ruby On Rails/CSS/HTML5)等，还有我可以的大儿子韦晰(Simon) ^_^" />
    <meta itemprop="url" content="http://weixuhong.com" />
    <article class="hentry" role="article" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
      
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2008-04-26T00:00:00+08:00"  data-updated="true" itemprop="datePublished dateCreated">2008 年4 月26 日</time>
        
           | <a href="#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="http://weixuhong.com">Comments</a>
        
      </p>
    
    
    <h1 class="entry-title" itemprop="name headline">
        Svn 命令
        
    </h1>
    
  </header>


<div class="entry-content clearfix" itemprop="articleBody description"><p>列 A</p>

<p>　　# addgroup [svn-users]</p>

<p>　　# usermod -u [nnnn] -G [svn-users]</p>

<p>　　# mkdir -m 770 [/home/svn-repos]</p>

<p>　　# chgrp [svn-users] [/home/svn-repos]</p>

<p>　　# svnadmin create –fs-type fsfs [/home/svn-repos]</p>

<p>　　请注意一定要在fs-type选项中明确“fsfs”。因为默认情况下，Subversion知识库文件系统的数据库的最初名称为“bdb”，已被证实有些不稳定。新版本中默认名称已经更改为fsfs，但是有些老版本及非标准版的Subversion依然使用bdb。出于安全起见，还是要在创建新知识库时明确一下fsfs数据库格式，保证系统能够更稳定。</p>

<p>　　在服务器上建完知识库目录以后，就可以在这个目录下创建实际的项目知识库。也许是出于直觉，你不应该直接在知识库内进行。列B告诉你如何通过单独目录在知识库目录中创建包含有被丢弃的文件的知识库，然后再通过“check in”登记来创建项目知识库。</p>

<p>　　最后以前面命令中指明的用户帐号登录。从所用用户帐号的根目录开始按步骤进行。使用非根用户身份登录，前面显示“$”符号。同样的，[　]括弧中的内容可根据你的需要进行修改。记得在输入时不要输入括弧。</p>

<p>　　列B</p>

<p>　　$ mkdir [project]</p>

<p>　　$ cd [project]</p>

<p>　　$ touch [file.txt]</p>

<p>　　$ svn import -m “[importing file to create project]” . file:///[home/username/svn-repos/project]</p>

<p>　　在服务器上创建项目知识库以后，就完成了。　在将项目知识库导入知识库之前需要删除刚才创建的项目目录，因为目录中的数据现在已经安全的保存在了服务器上。既然知识库是通过一个空文件使用touch command创建完成饿，所以删除也不会造成任何损失。</p>

<p>　　在客户端电脑上你可能需要编写项目或者访问文档，所以你还需要查看知识库中的内容并创建一个本地副本。范例如下。同样的也是假设您使用免费的类UNIX操作系统，如BSD，或者OpenSolaris这样的Linux版本。.</p>

<p>　　列 C</p>

<p>　　$ cd [/home/username]</p>

<p>　　$ mkdir [svn-local]</p>

<p>　　$ cd [svn-local]</p>

<p>　　$ svn co svn+ssh://[hostname/home/username/svn-repos/project project]</p>

<p>　　这时，一般都需要三次输入保存知识库的系统的密码。在本例中，除了你选择的操作系统，您还需要在客户端系统上安装功能完全的SSH客户端和SSH服务器。 Svn命令知道如何通过SSH传达网络需求，为客户端和服务器系统之间提供安全的加密连接，保护您的用户名、密码和数据不受可能注意您的网络的恶意安全破坏者侵害。</p>

<p>　　Svn-local目录不是必需的。如果你愿意的话，你可以就把最新校验过的项目或者文档目录直接保存到您的用户帐号主目录下。一般最好将由 Subversion知识库维护的目录与备份方式不同的目录分别保存，以免弄混。在以前的例子中，你都无需为重要数据“项目”的目录命名，所以也不需要为最初的空文件“file.txt”命名。</p>

<p>　　对项目的本地副本核完毕，就可以删除客户设备上的项目目录。然后就需要在目录内添加其他在Subversion中保存的文件，并在服务器上的Subversion知识库中进行核对。列D就为操作范例。</p>

<p>　　列 D</p>

<p>　　$ cd [/home/username/svn-local/project]</p>

<p>　　$ svn rm file.txt</p>

<p>　　$ cp -R [/home/username/project/*] .</p>

<p>　　$ svn add `ls -R`</p>

<p>　　$ svn ci -m “[added all base files to the project directory]”</p>

<p>　　cp –R命令能将目录中重要数据目录中的全部内容(在这里为/home/username/project) 复制到当前目录中 (由单独的句子指定)。svn add `ls -R` 命令将这个目录下全部内容以及所有的子目录添加到本地项目目录副本中的版本控制中。svn ci 命令将当前副本提交到服务器上的主目录中。在添加命令以后，svn客户端工具会显示添加文件列表。Ci命令会要求密码以确保你有权限进行提交。</p>

<p>　　Subversion的使用</p>

<p>　　不同的图形化用户界面的使用方法也不同，各个用户的使用方式也不同。对于使用命令行的客户，最重要也是最基本的升级、管理和提交项目文件的命令是以下这些：</p>

<p>　　svn up – 通过主知识库更新本地副本。在开始对任何文件的工作前都要进行更新。如果别人访问过知识库，也要在提交之前进行再次更新，是个好习惯。</p>

<p>　　svn status – 告诉你哪些文件被修改过，哪些经过增改但还未被提交，哪些创建以后还未添加到版本控制，哪些文件神秘消失而没有从版本控制中删除(最大的可能是因为你忘记使用svn rm 替代 simply rm)，以及哪些文件已经从版本控制中完全删除。</p>

<p>　　svn add – 我们刚才演示过，用来在版本控制中添加文件。</p>

<p>　　svn rm – 从版本控制中删除文件。这样也会从本地文件系统中将相关文件删除。</p>

<p>　　svn mv – 将知识库中本地副本中的某个文件移动到另一个地方，而不会造成Subversion数据库的混乱。它的工作原理有些类似标准的mv 命令，但是它只用于版本控制下的本地项目副本。</p>

<p>　　svn mkdir – 创建目录，与普通的mkdir 命令很类似，但是它同时能够将目录自动加入版本控制。</p>

<p>　　svn ci – 能将知识库中本地副本当前目录下以及其内部所有子目录内发生的全部变化提交给主知识库。在这一命令生效之前，必须首先解决svn状态命令报告的标有问号的部分(未知的文件状态)。在没有疑问以后，svn ci　会打开默认文本编辑器输入提交信息。如果你需要查找项目中较早版本中的文件就会用到这些文本。-m 选项能够被用来明确命令行中的提交信息，如上面创建和使用Subversion知识库中所演示的那样。这样做的目的在于给已提交的变化做出标记，以防以后什么时候可能会对之前做的修改进行分类。</p>

<p>　　svn help – 为你提供大量关于Subversion命令行客户端的使用信息，例如对每个svn命令深入的解释和举例，以及除这些以外更多命令的使用方法。您可以通过输入svn help add(这里假设你需要获得关于“add”命令的信息)获得更多关于特定svn命令的信息。</p>

<p>　　本文并非神化Subversion，只是对Subversion版本控制软件进行了有益的介绍，版本控制软件的使用是任何敬业的程序员都要使用的技巧。本文中的这些例子能够为您提供真切的帮助，即使您不是程序员也会感觉有益。</p>

<p>转载请注明：<a href="http://www.weixuhong.com">韦旭红的点点滴滴</a> » <a href="http://www.weixuhong.com/archives/66">svn 命令</a></p>

</div>


      <footer>
        <p class="meta text-muted">
          
  

<span class="glyphicon glyphicon-user"></span> <span class="byline author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person">Posted by <span class="fn" itemprop="name">gxbsst</span></span>

          












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2008-04-26T00:00:00+08:00"  data-updated="true" itemprop="datePublished dateCreated">2008 年4 月26 日</time>
          

<span class="glyphicon glyphicon-tags"></span>&nbsp;
<span class="categories">
  
    <a class='category' href='/blog/categories/ji-zhu-gan-xiang/'>技术感想</a>
  
</span>


        </p>
        
          <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://weixuhong.com/archives/66" data-via="Weixuhong" data-counturl="http://weixuhong.com/archives/66" >Tweet</a>
  
  
  
</div>

        
        
          <ul class="meta text-muted pager">
            
            <li class="previous"><a href="/archives/67" title="Previous Post: svn 创建全过程">&laquo; svn 创建全过程</a></li>
            
            
            <li class="next"><a href="/archives/69" title="Next Post: umask/chmod/adduser">umask/chmod/adduser &raquo;</a></li>
            
          </ul>
        
      </footer>
    </article>
    
  </div>

  
  <aside class="sidebar col-md-3">
    
      <section>
  <h1>关于我</h1>
  <p>一个写了多年代码的Ruby程序员，也即将是两个孩子他爸爸， 平时也热爱烘培，下厨房^_^</p>
</section><section class="panel panel-default">
	<div class="panel-heading">
		<h3 class="panel-title">分类</h3>
	</div>
	
	<ul id="categories">
		<li class='category'><a class='category' href='/blog/categories/angularjs/'>angularjs</a></li>
<li class='category'><a class='category' href='/blog/categories/chef/'>chef</a></li>
<li class='category'><a class='category' href='/blog/categories/directive/'>directive</a></li>
<li class='category'><a class='category' href='/blog/categories/ide/'>ide</a></li>
<li class='category'><a class='category' href='/blog/categories/ios/'>ios</a></li>
<li class='category'><a class='category' href='/blog/categories/javascript/'>javascript</a></li>
<li class='category'><a class='category' href='/blog/categories/knife-solo/'>knife-solo</a></li>
<li class='category'><a class='category' href='/blog/categories/linux-unix/'>linux/unix</a></li>
<li class='category'><a class='category' href='/blog/categories/php/'>php</a></li>
<li class='category'><a class='category' href='/blog/categories/postgresql/'>postgresql</a></li>
<li class='category'><a class='category' href='/blog/categories/rails/'>rails</a></li>
<li class='category'><a class='category' href='/blog/categories/regular-expressions/'>regular expressions</a></li>
<li class='category'><a class='category' href='/blog/categories/rspec/'>rspec</a></li>
<li class='category'><a class='category' href='/blog/categories/ruby-ruby-on-rails/'>ruby/ruby on rails</a></li>
<li class='category'><a class='category' href='/blog/categories/rubymine/'>rubymine</a></li>
<li class='category'><a class='category' href='/blog/categories/vagrant/'>vagrant</a></li>
<li class='category'><a class='category' href='/blog/categories/xhtml-css/'>xhtml/css</a></li>
<li class='category'><a class='category' href='/blog/categories/gong-zuo-ji-hua/'>工作计划</a></li>
<li class='category'><a class='category' href='/blog/categories/xin-qing-sui-xie/'>心情随写</a></li>
<li class='category'><a class='category' href='/blog/categories/ji-zhu-gan-xiang/'>技术感想</a></li>
<li class='category'><a class='category' href='/blog/categories/wei-fen-lei/'>未分类</a></li>
<li class='category'><a class='category' href='/blog/categories/za-tan/'>杂谈</a></li>
<li class='category'><a class='category' href='/blog/categories/sheng-huo-dian-di/'>生活点滴</a></li>
<li class='category'><a class='category' href='/blog/categories/ruan-jian-shi-yong/'>软件试用</a></li>

	</ul>
</section><section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">最新文章</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/blog/2014/12/27/postgresql-fen-zu-cha-xun/">Postgresql 分组查询</a>
    
    <a class="list-group-item " href="/blog/2014/10/28/rspec-3-zhong-yao-geng-xin/">Rspec 3 重要更新</a>
    
    <a class="list-group-item " href="/blog/2014/10/28/knife-solo-chu-tan/">Knife-solo 初探</a>
    
    <a class="list-group-item " href="/blog/2014/10/24/rspec-xin-jiu-fang-fa-dui-zhao-biao/">Rspec 新旧方法对照表</a>
    
    <a class="list-group-item " href="/blog/2014/10/23/rubymine-bu-neng-shu-ru-zhong-wen-%3F/">Rubymine 不能输入中文？</a>
    
  </div>
</section>






    
  </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2015 - Weston Wei(韦旭红)<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    

<script type="text/javascript">
      var disqus_shortname = 'Weixuhong';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr-2.0.js"></script>


  </body>
</html>
